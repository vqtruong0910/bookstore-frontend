{"version":3,"file":"static/js/2441.7314afec.chunk.js","mappings":"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","sources":["webpack://frontend/./src/page/Admin/AddProduct/style.module.scss?2cc7","page/Admin/AddProduct/index.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"hide-scrollbar\":\"style_hide-scrollbar__8BnN8\"};","import { useForm } from \"react-hook-form\";\r\nimport Textfield from \"../../../components/Textfield\";\r\nimport DropFile from \"../../../components/DropFile\";\r\nimport { VALIDATE } from \"../../../constants/validate\";\r\nimport clsx from \"clsx\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport style from \"./style.module.scss\";\r\nimport PreviewImage from \"../../../components/PreviewImage\";\r\nimport MenuSelect from \"../../../components/MenuSelect\";\r\nimport { useQueries, useQuery } from \"react-query\";\r\nimport axiosJWT from \"../../../config/axiosJWT\";\r\nimport { API } from \"../../../constants/api\";\r\nimport Loading from \"../../../components/Loading\";\r\nimport LoadingSmaller from '../../../assets/svg/LoadingSmaller';\r\n\r\nfunction AddProduct() {\r\n    const [loadingState, setLoadingState] = useState(false);\r\n    const result = useQueries([\r\n        {\r\n            queryKey: [\"category\"],\r\n            queryFn: async () => {\r\n                const result = await axiosJWT.get(API.GET_LIST_ALL_CATEGORY);\r\n                return result.data;\r\n            },\r\n            keepPreviousData: true,\r\n            staleTime: 5000\r\n        },\r\n        {\r\n            queryKey: [\"publishing company\"],\r\n            queryFn: async () => {\r\n                const result = await axiosJWT.get(API.GET_LIST_ALL_PUBLISHING);\r\n                return result.data;\r\n            },\r\n            keepPreviousData: true,\r\n            staleTime: 5000\r\n        },\r\n        {\r\n            queryKey: [\"authors\"],\r\n            queryFn: async () => {\r\n                const result = await axiosJWT.get(API.AUTHOR);\r\n                return result.data;\r\n            },\r\n            keepPreviousData: true,\r\n            staleTime: 5000\r\n        }\r\n    ]);\r\n    const { register, control, formState: { errors }, handleSubmit, setValue, trigger, watch, reset } = useForm({\r\n        mode: \"onBlur\",\r\n        defaultValues: {\r\n            TenSanPham: \"\",\r\n            TomTatND: \"\",\r\n            IDDanhMuc: \"\",\r\n            IDTheLoai: \"\",\r\n            IDNhaXuatBan: \"\",\r\n            GiaBan: \"\",\r\n            IDTacGia: \"\",\r\n            GiamGia: \"0\",\r\n            SoTrang: \"\",\r\n            SoLuongConLai: \"\",\r\n            DonViTinh: \"Quy·ªÉn\",\r\n            HinhAnh: \"\",\r\n        }\r\n    });\r\n\r\n    const { data: typeOfBook, isLoading, isError } = useQuery({\r\n        queryKey: [\"type of product\", watch(\"IDDanhMuc\")],\r\n        queryFn: async () => {\r\n            if (watch(\"IDDanhMuc\")) {\r\n                const result = await axiosJWT.get(`${API.GET_LIST_ALL_TYPEOF_BOOK}/${watch(\"IDDanhMuc\")}`)\r\n                return result.data;\r\n            }\r\n            return []\r\n        },\r\n        keepPreviousData: true,\r\n        staleTime: 5000\r\n    });\r\n\r\n    const [fileImage, setFileImage] = useState();\r\n\r\n    const onChangeImage = useCallback(async (e) => {\r\n        const fileImageFolder = e.target.files[0];\r\n        if (fileImageFolder) {\r\n            setValue(\"HinhAnh\", fileImageFolder);\r\n            if (await trigger(\"HinhAnh\")) {\r\n                const fileReader = new FileReader();\r\n                fileReader.readAsDataURL(fileImageFolder)\r\n                fileReader.onloadend = () => {\r\n                    setFileImage(fileReader.result);\r\n                }\r\n            } else setFileImage(null);\r\n        }\r\n    }, []);\r\n    const onSubmit = useCallback(async (data) => {\r\n        const { IDDanhMuc, ...rest } = data;\r\n        try {\r\n            setLoadingState(true)\r\n            const form = await axiosJWT.post(API.CREATE_PRODUCT, rest, { headers: { 'Content-Type': 'multipart/form-data' } });\r\n            if (!form.error) {\r\n                reset({\r\n                    TenSanPham: \"\",\r\n                    TomTatND: \"\",\r\n                    IDDanhMuc: \"\",\r\n                    IDTheLoai: \"\",\r\n                    IDNhaXuatBan: \"\",\r\n                    GiaBan: \"\",\r\n                    IDTacGia: \"\",\r\n                    GiamGia: \"0\",\r\n                    SoTrang: \"\",\r\n                    SoLuongConLai: \"\",\r\n                    DonViTinh: \"Quy·ªÉn\",\r\n                    HinhAnh: \"\",\r\n                })\r\n                setFileImage(\"\");\r\n                window.alert(\"Th√™m s·∫£n ph·∫©m th√†nh c√¥ng\")\r\n            }\r\n        } catch (error) {\r\n            window.alert(\"Th√™m s·∫£n ph·∫©m th·∫•t b·∫°i\")\r\n        } finally {\r\n            setLoadingState(false);\r\n        }\r\n    }, []);\r\n\r\n    for (const value of result) {\r\n        if (value.isLoading) {\r\n            return <Loading />\r\n        }\r\n        if (value.isError) {\r\n            return <div>ƒê√£ c√≥ l·ªói khi l·∫•y d·ªØ li·ªáu üò•</div>\r\n        }\r\n    }\r\n    if (isLoading) {\r\n        return <Loading />\r\n    }\r\n    if (isError) {\r\n        return <div>ƒê√£ c√≥ l·ªói khi l·∫•y d·ªØ li·ªáu üò•</div>\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"flex\">\r\n                <h2 className=\"text-xl font-semibold\">Th√™m S·∫£n ph·∫©m</h2>\r\n                {loadingState ?\r\n                    <button className=\"w-28 px-3 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto\" disabled><LoadingSmaller /> Loading...</button>\r\n                    :\r\n                    <button className=\"w-28 px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto\">X√°c nh·∫≠n</button>\r\n                }\r\n            </div>\r\n            <div className=\"grid sm:grid-cols-5 grid-cols-1 grid-flow-dense py-2 gap-4\">\r\n                <div className=\"col-span-1 sm:col-span-3\">\r\n                    <span>T√™n s·∫£n ph·∫©m</span>\r\n                    <Textfield rounded=\"rounded-sm\" name=\"TenSanPham\" control={control} rules={VALIDATE.name} placeholder=\"Truy·ªán c∆∞·ªùi Vi·ªát Nam...\" />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-3 row-span-2\">\r\n                    <span>N·ªôi dung</span>\r\n                    <textarea {...register(\"TomTatND\", VALIDATE.content)} className={clsx(errors.TomTatND && \"border-red-600\", style[\"hide-scrollbar\"], \"outline-none p-4 w-full border resize-none overflow-scroll\")} rows=\"6\" placeholder=\"M√¥ t·∫£ s·∫£n ph·∫©m...\"></textarea>\r\n                    {errors.TomTatND && <span className=\"px-2 italic text-sm text-red-500\">{errors.TomTatND.message}*</span>}\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-3\">\r\n                    <span>T√°c gi·∫£</span>\r\n                    <MenuSelect name=\"IDTacGia\" control={control} rules={VALIDATE.author} data={result[2].data} />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-2\">\r\n                    <span>Danh m·ª•c</span>\r\n                    <MenuSelect name=\"IDDanhMuc\" control={control} rules={VALIDATE.category} data={result[0].data} />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-2\">\r\n                    <span>Th·ªÉ lo·∫°i</span>\r\n                    <MenuSelect name=\"IDTheLoai\" control={control} rules={VALIDATE.typeof} data={typeOfBook} />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-2\">\r\n                    <span>Nh√† xu·∫•t b·∫£n</span>\r\n                    <MenuSelect name=\"IDNhaXuatBan\" control={control} rules={VALIDATE.publishing} data={result[1].data} />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-2\">\r\n                    <span>ƒê∆°n v·ªã t√≠nh</span>\r\n                    <Textfield rounded=\"rounded-sm\" name=\"DonViTinh\" control={control} rules={VALIDATE.unit} placeholder=\"VD: Cu·ªën\" />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-3 grid grid-cols-2 gap-4\">\r\n                    <div className=\"col-span-2 sm:col-span-1\">\r\n                        <span>Gi√° b√°n</span>\r\n                        <Textfield type=\"number\" rounded=\"rounded-sm\" name=\"GiaBan\" control={control} rules={VALIDATE.price} placeholder=\"120000\" />\r\n                    </div>\r\n                    <div className=\"col-span-2 sm:col-span-1\">\r\n                        <span>Ph·∫ßn trƒÉm gi·∫£m gi√°</span>\r\n                        <Textfield type=\"number\" rounded=\"rounded-sm\" name=\"GiamGia\" control={control} rules={VALIDATE.discount} placeholder=\"10\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-2 grid grid-cols-2 gap-4\">\r\n                    <div className=\"col-span-2 sm:col-span-1\">\r\n                        <span>S·ªë l∆∞·ª£ng</span>\r\n                        <Textfield type=\"number\" rounded=\"rounded-sm\" name=\"SoLuongConLai\" control={control} rules={VALIDATE.count} placeholder=\"120\" />\r\n                    </div>\r\n                    <div className=\"col-span-2 sm:col-span-1\">\r\n                        <span>S·ªë Trang</span>\r\n                        <Textfield type=\"number\" rounded=\"rounded-sm\" name=\"SoTrang\" control={control} rules={VALIDATE.numberPage} placeholder=\"10\" />\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-3 \">\r\n                    <span>H√¨nh ·∫£nh</span>\r\n                    <DropFile name=\"HinhAnh\" control={control} rules={VALIDATE.image} onChangeImage={onChangeImage} />\r\n                </div>\r\n                <div className=\"col-span-1 sm:col-span-2\">\r\n                    <span>Xem Tr∆∞·ªõc</span>\r\n                    <PreviewImage fileImage={fileImage} />\r\n                </div>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default AddProduct;\r\n"],"names":["useState","loadingState","setLoadingState","result","useQueries","queryKey","queryFn","axiosJWT","API","data","keepPreviousData","staleTime","useForm","mode","defaultValues","TenSanPham","TomTatND","IDDanhMuc","IDTheLoai","IDNhaXuatBan","GiaBan","IDTacGia","GiamGia","SoTrang","SoLuongConLai","DonViTinh","HinhAnh","register","control","errors","formState","handleSubmit","setValue","trigger","watch","reset","useQuery","typeOfBook","isLoading","isError","fileImage","setFileImage","onChangeImage","useCallback","e","fileImageFolder","target","files","fileReader","FileReader","readAsDataURL","onloadend","onSubmit","rest","headers","error","window","alert","value","Loading","className","disabled","LoadingSmaller","Textfield","rounded","name","rules","VALIDATE","placeholder","clsx","style","rows","message","MenuSelect","type","DropFile","PreviewImage"],"sourceRoot":""}