"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2441],{3346:function(n,e,a){a.r(e),a.d(e,{default:function(){return y}});var r=a(1413),s=a(7762),t=a(4925),c=a(885),o=a(4165),i=a(5861),l=a(1134),u=a(6509),d=a(9871),h=a(8664),p=a(8182),m=a(2791),x="style_hide-scrollbar__8BnN8",f=a(6233),T=a(2555),j=a(1933),v=a(5089),g=a(5548),Z=a(7786),D=a(184),b=["IDDanhMuc"];var y=function(){var n,e=(0,j.useQueries)([{queryKey:["category"],queryFn:function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){var e;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.get(g.b.GET_LIST_ALL_CATEGORY);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3},{queryKey:["publishing company"],queryFn:function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){var e;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.get(g.b.GET_LIST_ALL_PUBLISHING);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3},{queryKey:["authors"],queryFn:function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){var e;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.get(g.b.AUTHOR);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3}]),a=(0,l.cI)({mode:"onBlur",defaultValues:{TenSanPham:"",TomTatND:"",IDDanhMuc:"",IDTheLoai:"",IDNhaXuatBan:"",GiaBan:"",IDTacGia:"",GiamGia:"0",SoTrang:"",SoLuongConLai:"",DonViTinh:"Quy\u1ec3n",HinhAnh:""}}),y=a.register,N=a.control,w=a.formState.errors,I=a.handleSubmit,k=a.setValue,L=a.trigger,S=a.watch,G=a.reset,_=(0,j.useQuery)({queryKey:["type of product",S("IDDanhMuc")],queryFn:function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){var e;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!S("IDDanhMuc")){n.next=5;break}return n.next=3,v.Z.get("".concat(g.b.GET_LIST_ALL_TYPEOF_BOOK,"/").concat(S("IDDanhMuc")));case 3:return e=n.sent,n.abrupt("return",e.data);case 5:return n.abrupt("return",[]);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3}),C=_.data,A=_.isLoading,P=_.isError,B=(0,m.useState)(),E=(0,c.Z)(B,2),M=E[0],q=E[1],H=(0,m.useCallback)(function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e){var a,r;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=e.target.files[0])){n.next=12;break}return k("HinhAnh",a),n.next=5,L("HinhAnh");case 5:if(!n.sent){n.next=11;break}(r=new FileReader).readAsDataURL(a),r.onloadend=function(){q(r.result)},n.next=12;break;case 11:q(null);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]),V=(0,m.useCallback)(function(){var n=(0,i.Z)((0,o.Z)().mark((function n(e){var a;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.IDDanhMuc,a=(0,t.Z)(e,b),n.prev=1,n.next=4,v.Z.post(g.b.CREATE_PRODUCT,a,{headers:{"Content-Type":"multipart/form-data"}});case 4:n.sent.error||(G({TenSanPham:"",TomTatND:"",IDDanhMuc:"",IDTheLoai:"",IDNhaXuatBan:"",GiaBan:"",IDTacGia:"",GiamGia:"0",SoTrang:"",SoLuongConLai:"",DonViTinh:"",HinhAnh:""}),q(""),window.alert("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng")),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),window.alert("Th\xeam s\u1ea3n ph\u1ea9m th\u1ea5t b\u1ea1i");case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}(),[]),F=(0,s.Z)(e);try{for(F.s();!(n=F.n()).done;){var O=n.value;if(O.isLoading)return(0,D.jsx)(Z.Z,{});if(O.isError)return(0,D.jsx)("div",{children:"\u0110\xe3 c\xf3 l\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u \ud83d\ude25"})}}catch(R){F.e(R)}finally{F.f()}return A?(0,D.jsx)(Z.Z,{}):P?(0,D.jsx)("div",{children:"\u0110\xe3 c\xf3 l\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u \ud83d\ude25"}):(0,D.jsxs)("form",{onSubmit:I(V),children:[(0,D.jsxs)("div",{className:"flex",children:[(0,D.jsx)("h2",{className:"text-xl font-semibold",children:"Th\xeam S\u1ea3n ph\u1ea9m"}),(0,D.jsx)("button",{className:"px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto",children:"X\xe1c nh\u1eadn"})]}),(0,D.jsxs)("div",{className:"grid sm:grid-cols-5 grid-cols-1 grid-flow-dense py-2 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3",children:[(0,D.jsx)("span",{children:"T\xean s\u1ea3n ph\u1ea9m"}),(0,D.jsx)(u.Z,{rounded:"rounded-sm",name:"TenSanPham",control:N,rules:h.s.name,placeholder:"Truy\u1ec7n c\u01b0\u1eddi Vi\u1ec7t Nam..."})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3 row-span-2",children:[(0,D.jsx)("span",{children:"N\u1ed9i dung"}),(0,D.jsx)("textarea",(0,r.Z)((0,r.Z)({},y("TomTatND",h.s.content)),{},{className:(0,p.Z)(w.TomTatND&&"border-red-600",x,"outline-none p-4 w-full border resize-none overflow-scroll"),rows:"6",placeholder:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m..."})),w.TomTatND&&(0,D.jsxs)("span",{className:"px-2 italic text-sm text-red-500",children:[w.TomTatND.message,"*"]})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3",children:[(0,D.jsx)("span",{children:"T\xe1c gi\u1ea3"}),(0,D.jsx)(T.Z,{name:"IDTacGia",control:N,rules:h.s.author,data:e[2].data})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Danh m\u1ee5c"}),(0,D.jsx)(T.Z,{name:"IDDanhMuc",control:N,rules:h.s.category,data:e[0].data})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Th\u1ec3 lo\u1ea1i"}),(0,D.jsx)(T.Z,{name:"IDTheLoai",control:N,rules:h.s.typeof,data:C})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Nh\xe0 xu\u1ea5t b\u1ea3n"}),(0,D.jsx)(T.Z,{name:"IDNhaXuatBan",control:N,rules:h.s.publishing,data:e[1].data})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"\u0110\u01a1n v\u1ecb t\xednh"}),(0,D.jsx)(u.Z,{rounded:"rounded-sm",name:"DonViTinh",control:N,rules:h.s.unit,placeholder:"VD: Cu\u1ed1n"})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3 grid grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"Gi\xe1 b\xe1n"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"GiaBan",control:N,rules:h.s.price,placeholder:"120000"})]}),(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"Ph\u1ea7n tr\u0103m gi\u1ea3m gi\xe1"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"GiamGia",control:N,rules:h.s.discount,placeholder:"10"})]})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2 grid grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"SoLuongConLai",control:N,rules:h.s.count,placeholder:"120"})]}),(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"S\u1ed1 Trang"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"SoTrang",control:N,rules:h.s.numberPage,placeholder:"10"})]})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3 ",children:[(0,D.jsx)("span",{children:"H\xecnh \u1ea3nh"}),(0,D.jsx)(d.Z,{name:"HinhAnh",control:N,rules:h.s.image,onChangeImage:H})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Xem Tr\u01b0\u1edbc"}),(0,D.jsx)(f.Z,{fileImage:M})]})]})]})}}}]);
//# sourceMappingURL=2441.5f81ef4a.chunk.js.map