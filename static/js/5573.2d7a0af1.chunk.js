"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[5573],{9278:function(n,e,a){a.r(e),a.d(e,{default:function(){return I}});var s=a(1413),r=a(7762),o=a(4925),t=a(4165),i=a(5861),l=a(885),c=a(1134),u=a(6509),d=a(9871),h=a(8664),p=a(8182),m=a(2791),v="style_hide-scrollbar__jlYFl",x=a(6233),f=a(2555),g=a(1933),T=a(5089),j=a(5548),D=a(7786),Z=a(6871),b=a(1298),N=a(184),y=["IDDanhMuc"];var I=function(){var n=(0,Z.TH)().state,e=(0,m.useState)(),a=(0,l.Z)(e,2),I=a[0],w=a[1],L=(0,m.useState)(!1),S=(0,l.Z)(L,2),k=S[0],G=S[1],C=(0,g.useQueries)([{queryKey:["category"],queryFn:function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var e;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.Z.get(j.b.GET_LIST_ALL_CATEGORY);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3},{queryKey:["publishing company"],queryFn:function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var e;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.Z.get(j.b.GET_LIST_ALL_PUBLISHING);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3},{queryKey:["authors"],queryFn:function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var e;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,T.Z.get(j.b.AUTHOR);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3}]),A=(0,c.cI)({mode:"onBlur",defaultValues:{TenSanPham:null!==n&&void 0!==n&&n.TenSanPham?null===n||void 0===n?void 0:n.TenSanPham:"",TomTatND:null!==n&&void 0!==n&&n.TomTatND?null===n||void 0===n?void 0:n.TomTatND:"",IDDanhMuc:null!==n&&void 0!==n&&n.IDDanhMuc?null===n||void 0===n?void 0:n.IDDanhMuc:"",IDTheLoai:null!==n&&void 0!==n&&n.IDTheLoai?null===n||void 0===n?void 0:n.IDTheLoai:"",IDNhaXuatBan:null!==n&&void 0!==n&&n.IDNhaXuatBan?null===n||void 0===n?void 0:n.IDNhaXuatBan:"",GiaBan:null!==n&&void 0!==n&&n.GiaBan?null===n||void 0===n?void 0:n.GiaBan:"",IDTacGia:null!==n&&void 0!==n&&n.IDTacGia?null===n||void 0===n?void 0:n.IDTacGia:"",GiamGia:null!==n&&void 0!==n&&n.GiamGia?null===n||void 0===n?void 0:n.GiamGia:"",SoTrang:null!==n&&void 0!==n&&n.SoTrang?null===n||void 0===n?void 0:n.SoTrang:"",SoLuongConLai:null!==n&&void 0!==n&&n.SoLuongConLai?null===n||void 0===n?void 0:n.SoLuongConLai:"",DonViTinh:null!==n&&void 0!==n&&n.DonViTinh?null===n||void 0===n?void 0:n.DonViTinh:"",HinhAnh:null!==n&&void 0!==n&&n.HinhAnh?null===n||void 0===n?void 0:n.HinhAnh:""}}),P=A.register,_=A.control,H=A.formState.errors,B=A.handleSubmit,E=A.setValue,M=A.trigger,q=A.watch,V=(0,g.useQuery)({queryKey:["type of product",q("IDDanhMuc")],queryFn:function(){var n=(0,i.Z)((0,t.Z)().mark((function n(){var e;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!q("IDDanhMuc")){n.next=5;break}return n.next=3,T.Z.get("".concat(j.b.GET_LIST_ALL_TYPEOF_BOOK,"/").concat(q("IDDanhMuc")));case 3:return e=n.sent,n.abrupt("return",e.data);case 5:return n.abrupt("return",[]);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0}),F=V.data,O=V.isLoading,R=V.isError,X=(0,m.useCallback)(function(){var n=(0,i.Z)((0,t.Z)().mark((function n(e){var a,s;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=e.target.files[0])){n.next=12;break}return E("HinhAnh",a),n.next=5,M("HinhAnh");case 5:if(!n.sent){n.next=11;break}(s=new FileReader).readAsDataURL(a),s.onloadend=function(){w(s.result)},n.next=12;break;case 11:w(null);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]),K=(0,m.useCallback)(function(){var e=(0,i.Z)((0,t.Z)().mark((function e(a){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.IDDanhMuc,s=(0,o.Z)(a,y),e.prev=1,G(!0),e.next=5,T.Z.put("".concat(j.b.CREATE_PRODUCT,"/").concat(null===n||void 0===n?void 0:n.IDSanPham),s,{headers:{"Content-Type":"multipart/form-data"}});case 5:window.alert("C\u1eadp nh\u1eadt s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),window.alert("C\u1eadp nh\u1eadt s\u1ea3n ph\u1ea9m th\u1ea5t b\u1ea1i");case 12:return e.prev=12,G(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})));return function(n){return e.apply(this,arguments)}}(),[]);(0,m.useEffect)((function(){null!==(null===n||void 0===n?void 0:n.HinhAnh)&&w(null===n||void 0===n?void 0:n.HinhAnh)}),[]);var U,Y=(0,r.Z)(C);try{for(Y.s();!(U=Y.n()).done;){var Q=U.value;if(Q.isLoading)return(0,N.jsx)(D.Z,{});if(Q.isError)return(0,N.jsx)("div",{children:"\u0110\xe3 c\xf3 l\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u \ud83d\ude25"})}}catch(z){Y.e(z)}finally{Y.f()}return O?(0,N.jsx)(D.Z,{}):R?(0,N.jsx)("div",{children:"\u0110\xe3 c\xf3 l\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u \ud83d\ude25"}):(0,N.jsxs)("form",{onSubmit:B(K),children:[(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("h2",{className:"text-xl font-semibold",children:"C\u1eadp Nh\u1eadt S\u1ea3n ph\u1ea9m"}),k?(0,N.jsxs)("button",{className:"w-28 px-3 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto",disabled:!0,children:[(0,N.jsx)(b.Z,{})," Loading..."]}):(0,N.jsx)("button",{className:"w-28 px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto",children:"X\xe1c nh\u1eadn"})]}),(0,N.jsxs)("div",{className:"grid sm:grid-cols-5 grid-cols-1 grid-flow-dense py-2 gap-4",children:[(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-3",children:[(0,N.jsx)("span",{children:"T\xean s\u1ea3n ph\u1ea9m"}),(0,N.jsx)(u.Z,{rounded:"rounded-sm",name:"TenSanPham",control:_,rules:h.s.name,placeholder:"Truy\u1ec7n c\u01b0\u1eddi Vi\u1ec7t Nam..."})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-3 row-span-2",children:[(0,N.jsx)("span",{children:"N\u1ed9i dung"}),(0,N.jsx)("textarea",(0,s.Z)((0,s.Z)({},P("TomTatND",h.s.content)),{},{className:(0,p.Z)(H.TomTatND&&"border-red-600",v,"outline-none p-4 w-full border resize-none overflow-scroll"),rows:"6",placeholder:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m..."})),H.TomTatND&&(0,N.jsxs)("span",{className:"px-2 italic text-sm text-red-500",children:[H.TomTatND.message,"*"]})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-3",children:[(0,N.jsx)("span",{children:"T\xe1c gi\u1ea3"}),(0,N.jsx)(f.Z,{name:"IDTacGia",control:_,rules:h.s.author,data:C[2].data})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,N.jsx)("span",{children:"Danh m\u1ee5c"}),(0,N.jsx)(f.Z,{name:"IDDanhMuc",control:_,rules:h.s.category,data:C[0].data})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,N.jsx)("span",{children:"Th\u1ec3 lo\u1ea1i"}),(0,N.jsx)(f.Z,{name:"IDTheLoai",control:_,rules:h.s.typeof,data:F})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,N.jsx)("span",{children:"Nh\xe0 xu\u1ea5t b\u1ea3n"}),(0,N.jsx)(f.Z,{name:"IDNhaXuatBan",control:_,rules:h.s.publishing,data:C[1].data})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,N.jsx)("span",{children:"\u0110\u01a1n v\u1ecb t\xednh"}),(0,N.jsx)(u.Z,{rounded:"rounded-sm",name:"DonViTinh",control:_,rules:h.s.unit,placeholder:"VD: Cu\u1ed1n"})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-3 grid grid-cols-2 gap-4",children:[(0,N.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,N.jsx)("span",{children:"Gi\xe1 b\xe1n"}),(0,N.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"GiaBan",control:_,rules:h.s.price,placeholder:"120000"})]}),(0,N.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,N.jsx)("span",{children:"Ph\u1ea7n tr\u0103m gi\u1ea3m gi\xe1"}),(0,N.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"GiamGia",control:_,rules:h.s.discount,placeholder:"10"})]})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-2 grid grid-cols-2 gap-4",children:[(0,N.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,N.jsx)("span",{children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,N.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"SoLuongConLai",control:_,rules:h.s.count,placeholder:"120"})]}),(0,N.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,N.jsx)("span",{children:"S\u1ed1 Trang"}),(0,N.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"SoTrang",control:_,rules:h.s.numberPage,placeholder:"10"})]})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-3 ",children:[(0,N.jsx)("span",{children:"H\xecnh \u1ea3nh"}),(0,N.jsx)(d.Z,{name:"HinhAnh",control:_,rules:h.s.image,onChangeImage:X})]}),(0,N.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,N.jsx)("span",{children:"Xem Tr\u01b0\u1edbc"}),(0,N.jsx)(x.Z,{fileImage:I})]})]})]})}}}]);
//# sourceMappingURL=5573.2d7a0af1.chunk.js.map