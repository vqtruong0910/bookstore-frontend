"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9981],{8664:function(e,n,t){t.d(n,{s:function(){return a}});var a={email:{required:"Xin nh\u1eadp v\xe0o email c\u1ee7a b\u1ea1n",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g,message:"Email sai \u0111\u1ecbnh d\u1ea1ng"}},password:{required:"Xin nh\u1eadp v\xe0o m\u1eadt kh\u1ea9u",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/,message:"T\u1ed1i thi\u1ec3u t\xe1m k\xfd t\u1ef1, \xedt nh\u1ea5t m\u1ed9t ch\u1eef hoa, m\u1ed9t ch\u1eef th\u01b0\u1eddng v\xe0 m\u1ed9t s\u1ed1"}},confirmPassword:function(e,n){return{required:"Xin nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",validate:function(t){if(t!==n(e))return"M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp"}}},date:{required:"Ng\xe0y sinh c\u1ee7a b\u1ea1n ?",pattern:{value:/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,message:"DD/MM/YYYY"}},name:{required:"Nh\u1eadp t\xean s\u1ea3n ph\u1ea9m"},gender:{required:"Gi\u1edbi t\xednh c\u1ee7a b\u1ea1n l\xe0 g\xec ?"},unit:{required:"Nh\u1eadp \u0111\u01a1n v\u1ecb t\xednh c\u1ee7a s\u1ea3n ph\u1ea9m",min:{value:1,message:"Xin vui l\xf2ng nh\u1eadp gi\xe1 l\u1edbn h\u01a1n 1"}},price:{required:"Nh\u1eadp gi\xe1 b\xe1n s\u1ea3n ph\u1ea9m th\xeam v\xe0o"},count:{required:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m th\xeam v\xe0o",min:{value:1,message:"Xin vui l\xf2ng nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng l\u1edbn h\u01a1n 0"}},category:{required:"Ch\u1ecdn danh m\u1ee5c cho s\u1ea3n ph\u1ea9m"},typeof:{required:"Ch\u1ecdn th\u1ec3 lo\u1ea1i cho s\u1ea3n ph\u1ea9m"},publishing:{required:"Ch\u1ecdn nh\xe0 xu\u1ea5t b\u1ea3n cho s\u1ea3n ph\u1ea9m"},author:{required:"Ch\u1ecdn t\xe1c gi\u1ea3 cho s\u1ea3n ph\u1ea9m"},discount:{required:"Nh\u1eadp ph\u1ea7m tr\u0103m gi\xe1 gi\u1ea3m cho s\u1ea3n ph\u1ea9m",min:{value:0,message:"Xin vui l\xf2ng nh\u1eadp gi\xe1 l\u1edbn h\u01a1n ho\u1eb7c b\u1eb1ng 0"}},numberPage:{required:"Nh\u1eadp s\u1ed1 trang c\u1ee7a s\u1ea3n ph\u1ea9m",min:{value:1,message:"Xin vui l\xf2ng nh\u1eadp gi\xe1 l\u1edbn h\u01a1n 0"}},content:{required:"Vi\u1ebft v\xe0i d\xf2ng m\xf4 t\u1ea3 ng\u1eafn v\u1ec1 n\u1ed9i dung"},image:{required:"Th\xeam 1 \u1ea3nh cho s\u1ea3n ph\u1ea9m",validate:{acceptedFormats:function(e){if(null!==e&&void 0!==e&&e.type)return["image/jpeg","image/jpg","image/png","image/gif"].includes(null===e||void 0===e?void 0:e.type)||"\u0110\u1ecbnh d\u1ea1ng \u1ea3nh l\xe0 PNG, JPEG, JPG, GIF"},lessThan10MB:function(e){if(null!==e&&void 0!==e&&e.size)return(null===e||void 0===e?void 0:e.size)<10485760||"K\xedch th\u01b0\u1edbc \u1ea3nh t\u1ed1i \u0111a l\xe0 10MB"}}},filterDate:{pattern:{value:/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,message:"DD/MM/YYYY"}}}},9981:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var a=t(4165),r=t(1413),s=t(5861),i=t(885),c=t(8182),l=t(2791),u=t(9126),d=t(8820),o=t(1933),h=t(6871),m=t(3504),p=t(7786),x=t(5089),g=t(5548),f=t(1904),b="style_none-spin__0Bn5P",v=t(1134),N=t(8664),j=t(184);var w=function(){var e,n=(0,l.useId)(),t=(0,h.s0)(),w=(0,o.useQueryClient)(),T=(0,l.useState)(1),k=(0,i.Z)(T,2),D=k[0],y=k[1],Z=(0,l.useState)(!1),C=(0,i.Z)(Z,2),L=C[0],S=C[1],M=(0,v.cI)({mode:"onBlur",defaultValues:{DanhMuc:"",TheLoai:"",Ngay:""}}),q=M.register,P=(M.formState.errors,M.handleSubmit),_=M.reset,G=M.watch,E=(0,o.useQuery)(["products",D,L],(0,s.Z)((0,a.Z)().mark((function e(){var n,t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},L.DanhMuc&&(n.c=L.DanhMuc),L.TheLoai&&(n.k=L.TheLoai),L.Ngay&&(n.d=L.Ngay),e.prev=4,e.next=7,x.Z.get(g.b.GET_PRODUCT_IN_PAGE,{params:(0,r.Z)({p:D,s:5},n)});case 7:return t=e.sent,e.abrupt("return",t.data);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),{keepPreviousData:!0}),I=E.data,Y=E.isLoading,X=E.isError,A=(0,o.useQuery)(["category"],(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.get(g.b.GET_LIST_ALL_CATEGORY);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)}))),{keepPreviousData:!0,staleTime:5e3}),B=A.data,z=A.isError,O=(0,o.useQuery)(["typeofbook",G("DanhMuc")],(0,s.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G("DanhMuc")){e.next=5;break}return e.next=3,x.Z.get("".concat(g.b.GET_LIST_ALL_TYPEOF_BOOK,"/").concat(G("DanhMuc")));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),{keepPreviousData:!0,staleTime:5e3}),F=O.data,Q=O.isError,K=(0,o.useMutation)(function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.delete("".concat(g.b.DELETE_PRODUCT,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),{onSuccess:function(){w.invalidateQueries("products")}}),V=K.mutateAsync,$=(0,l.useCallback)((function(e){if(null!==e){var n=new Date(e);return("0"+n.getDate()).slice(-2)+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear()}}),[]),R=(0,l.useCallback)((function(){y((function(e){return e>=I.SoLuongTrang?I.SoLuongTrang:++e}))}),[D,I]),U=(0,l.useCallback)((function(){y((function(e){return e>1?--e:1}))}),[D]),H=(0,l.useCallback)((function(){y(1)}),[]),J=(0,l.useCallback)((function(){y(I.SoLuongTrang)}),[I]),W=(0,l.useCallback)((function(e){var n=parseInt(e.target.value);n>0&&n<=I.SoLuongTrang&&y(n)}),[I]),ee=(0,l.useCallback)((function(e){window.confirm("B\u1ea1n ch\u1eafn ch\u1eafn l\xe0 mu\u1ed1n x\xf3a s\u1ea3n ph\u1ea9m n\xe0y ch\u1ee9")&&V(e).then((function(){window.alert("X\xf3a s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng")})).catch((function(e){console.log(e),window.alert("X\xf3a s\u1ea3n ph\u1ea9m th\u1ea5t b\u1ea1i")}))}),[]),ne=(0,l.useCallback)((function(e){t(f.m.admin.update_product,{state:e})}),[]),te=(0,l.useCallback)((function(e){S((0,r.Z)({},e))}),[]),ae=(0,l.useCallback)((function(){_({DanhMuc:"",TheLoai:"",Ngay:""}),S(!1)}),[]);return Y?(0,j.jsx)(p.Z,{}):X||z||Q?(0,j.jsx)("h1",{children:"Kh\xf4ng th\u1ec3 t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u \ud83d\ude25"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex space-x-2",children:[(0,j.jsx)("h2",{className:"text-xl font-semibold",children:"S\u1ea3n ph\u1ea9m"}),(0,j.jsx)(m.rU,{to:f.m.admin.add_product,className:"px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors",children:"Th\xeam s\u1ea3n ph\u1ea9m"})]}),(0,j.jsxs)("div",{className:"py-2 space-y-1",children:[(0,j.jsx)("div",{className:"hidden md:flex",children:(0,j.jsxs)("form",{onSubmit:P(te),className:"flex ml-auto space-x-3",children:[(0,j.jsxs)("select",(0,r.Z)((0,r.Z)({},q("DanhMuc")),{},{className:"rounded-sm border cursor-pointer",children:[(0,j.jsx)("option",{value:"",children:"--Select--"}),null===B||void 0===B?void 0:B.map((function(e){return(0,j.jsx)("option",{value:e.IDDanhMuc,children:e.TenDanhMuc},e.IDDanhMuc)}))]})),(0,j.jsxs)("select",(0,r.Z)((0,r.Z)({},q("TheLoai")),{},{className:"rounded-sm border cursor-pointer",children:[(0,j.jsx)("option",{value:"",children:"--Select--"}),null===F||void 0===F?void 0:F.map((function(e){return(0,j.jsx)("option",{value:e.IDTheLoai,children:e.TenTheLoai},e.IDTheLoai)}))]})),(0,j.jsx)("input",(0,r.Z)((0,r.Z)({type:"date"},q("Ngay",N.s.filterDate)),{},{className:"rounded-sm border cursor-pointer"})),(0,j.jsx)("input",{type:"submit",className:"rounded-sm border px-2 py-1 text-sm cursor-pointer bg-white",value:"L\u1ecdc"}),L&&(0,j.jsx)("input",{onClick:ae,type:"button",className:"rounded-sm text-red-500 border px-2 py-1 text-sm cursor-pointer bg-white",value:"X"})]})}),(0,j.jsxs)("div",{className:"flex justify-end space-x-2 py-1",children:[(0,j.jsxs)("div",{className:"px-2 border rounded-sm cursor-pointer",children:[I.TongSanPham," m\u1ee5c"]}),(0,j.jsx)("div",{className:"px-2 border rounded-sm cursor-pointer",onClick:H,children:"\xab"}),(0,j.jsx)("div",{className:"px-2 border rounded-sm cursor-pointer",onClick:U,children:"<"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("input",{type:"number",className:(0,c.Z)(b,"px-2 border rounded-sm cursor-pointer w-14 text-center"),value:D,onChange:function(e){return W(e)}})," / ",null===I||void 0===I?void 0:I.SoLuongTrang]}),(0,j.jsx)("div",{className:"px-2 border rounded-sm cursor-pointer",onClick:R,children:">"}),(0,j.jsx)("div",{className:"px-2 border rounded-sm cursor-pointer",onClick:J,children:"\xbb"})]})]}),(0,j.jsxs)("table",{className:"table-auto border-collapse border rounded-sm w-full bg-white md:table-fixed",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{className:"border bg-slate-800 text-slate-200",children:[(0,j.jsx)("th",{className:"p-2 w-24 hidden md:table-cell",children:(0,j.jsx)(u.Lwf,{className:"mx-auto w-full"})}),(0,j.jsx)("th",{className:"p-2 w-40 text-left",children:"T\xean"}),(0,j.jsx)("th",{className:"p-2 w-40 text-left",children:"Danh m\u1ee5c"}),(0,j.jsx)("th",{className:"p-2 text-left",children:"Th\u1ec3 lo\u1ea1i"}),(0,j.jsx)("th",{className:"p-2 text-left",children:"Gi\xe1 (VN\u0110)"}),(0,j.jsx)("th",{className:"p-2 text-center hidden md:table-cell",children:"Gi\u1ea3m gi\xe1"}),(0,j.jsx)("th",{className:"p-2 text-left hidden md:table-cell",children:"\u0110\u01a1n v\u1ecb"}),(0,j.jsx)("th",{className:"p-2 text-left hidden md:table-cell",children:"Ng\xe0y th\xeam"}),(0,j.jsx)("th",{className:"p-2 text-center hidden md:table-cell",children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,j.jsx)("th",{className:"p-2 text-center w-16"}),(0,j.jsx)("th",{className:"p-2 text-center w-16"})]})}),(0,j.jsx)("tbody",{children:null===I||void 0===I||null===(e=I.DanhSach)||void 0===e?void 0:e.map((function(e){return(0,j.jsxs)("tr",{className:"odd:bg-slate-100 border",children:[(0,j.jsx)("td",{className:"p-2 hidden md:table-cell",children:(0,j.jsx)("img",{className:"object-contain h-24 mx-auto",src:e.HinhAnh,alt:"book"})}),(0,j.jsx)("td",{className:"p-2",children:e.TenSanPham}),(0,j.jsx)("td",{className:"p-2",children:e.TenDanhMuc}),(0,j.jsx)("td",{className:"p-2",children:e.TenTheLoai}),(0,j.jsx)("td",{className:"p-2",children:e.GiaBan}),(0,j.jsx)("td",{className:"p-2 text-center hidden md:table-cell",children:e.GiamGia}),(0,j.jsx)("td",{className:"p-2 hidden md:table-cell",children:e.DonViTinh}),(0,j.jsx)("td",{className:"p-2 hidden md:table-cell",children:$(e.NgayThem)}),(0,j.jsx)("td",{className:"p-2 hidden md:table-cell text-center",children:e.SoLuongConLai}),(0,j.jsx)("td",{className:"p-2 text-indigo-500 font-semibold w-16 align-middle",children:(0,j.jsx)("span",{className:"w-full",children:(0,j.jsx)(u.HlX,{onClick:function(){return ne(e)},size:20,className:"cursor-pointer mx-auto"})})}),(0,j.jsx)("td",{className:"p-2 text-red-500 font-semibold w-16 align-middle",children:(0,j.jsx)("span",{className:"w-full",children:(0,j.jsx)(d.YK6,{onClick:function(){return ee(e.IDSanPham)},size:20,className:"cursor-pointer mx-auto"})})})]},n+e.IDSanPham)}))})]})]})}}}]);
//# sourceMappingURL=9981.10d9b03c.chunk.js.map