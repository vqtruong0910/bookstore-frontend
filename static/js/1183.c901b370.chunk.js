"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[1183],{1183:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var s=n(1413),a=n(4165),r=n(5861),c=n(885),l=n(8182),o=n(2791),i=n(1134),u=n(8820),d=n(9126),h=n(1933),m=n(6871),x=n(7786),f=n(5089),p=n(5548),b="style_hide-scrollbar__Oeq6v",w=n(184);var j=function(){var e=(0,o.useId)(),t=(0,m.UO)().id,n=(0,h.useQueryClient)(),j=(0,o.useState)({}),T=(0,c.Z)(j,2),N=T[0],g=T[1],v=(0,o.useState)(!1),y=(0,c.Z)(v,2),Z=y[0],k=y[1],L=(0,h.useQuery)(["typeofbooks"],(0,r.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(isNaN(t)){e.next=12;break}return e.prev=1,e.next=4,f.Z.get("".concat(p.b.GET_TYPEOF_BOOK_IN_PAGE,"/").concat(t));case 4:return n=e.sent,console.log(n.data),e.abrupt("return",n.data);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",[]);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),{keepPreviousData:!0,staleTime:5e3}),O=L.data,_=L.isLoading,C=L.isError,S=(0,i.cI)({mode:"onBlur",defaultValues:{TenTheLoai:""}}),A=S.register,E=S.formState.errors,B=S.handleSubmit,M=S.reset,D=(0,i.cI)({mode:"onBlur",defaultValues:{TheLoai:""}}),I=D.register,K=(D.formState.errors,D.handleSubmit),P=(D.reset,D.setValue),F=(0,h.useMutation)(function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.post(p.b.MANAGE_TYPEOF_BOOK,{TenTheLoai:n.TenTheLoai,IDDanhMuc:t});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){n.invalidateQueries("typeofbooks")}}),G=F.mutateAsync,Q=(0,h.useMutation)(function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.put("".concat(p.b.MANAGE_TYPEOF_BOOK,"/").concat(N.IDTheLoai),{TenTheLoai:n.TheLoai,IDDanhMuc:t});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){n.invalidateQueries("typeofbooks")}}),Y=Q.mutateAsync,z=(0,h.useMutation)(function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.delete("".concat(p.b.MANAGE_TYPEOF_BOOK,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){n.invalidateQueries("typeofbooks")}}),V=z.mutateAsync,X=(0,o.useCallback)((function(e){P("TheLoai",e.TenTheLoai),g(e),k(!0)}),[]),q=(0,o.useCallback)((function(e){window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn l\xe0 mu\u1ed1n th\xeam danh m\u1ee5c n\xe0y ch\u1ee9")&&G(e).then((function(){window.alert("Th\xeam danh m\u1ee5c th\xe0nh c\xf4ng"),M({TenDanhMuc:""})})).catch((function(e){console.log(e),window.alert("Th\xeam danh m\u1ee5c th\u1ea5t b\u1ea1i")}))}),[]),H=(0,o.useCallback)((function(e){window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn l\xe0 mu\u1ed1n thay \u0111\u1ed5i danh m\u1ee5c n\xe0y ch\u1ee9")&&Y(e).then((function(){window.alert("Thay \u0111\u1ed5i danh m\u1ee5c th\xe0nh c\xf4ng"),k(!1)})).catch((function(e){console.log(e),window.alert("Thay \u0111\u1ed5i danh m\u1ee5c th\u1ea5t b\u1ea1i")}))}),[]),U=(0,o.useCallback)((function(e){window.confirm("B\u1ea1n ch\u1eafc ch\u1eafn l\xe0 mu\u1ed1n x\xf3a danh m\u1ee5c n\xe0y ch\u1ee9")&&V(e).then((function(){window.alert("X\xf3a danh m\u1ee5c th\xe0nh c\xf4ng")})).catch((function(e){console.log(e),window.alert("X\xf3a danh m\u1ee5c th\u1ea5t b\u1ea1i")}))}),[]);return _?(0,w.jsx)(x.Z,{}):C?(0,w.jsx)("h1",{children:"Kh\xf4ng th\u1ec3 t\u1ea3i \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u \ud83d\ude25"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"flex space-x-2",children:(0,w.jsx)("h2",{className:"text-xl font-semibold",children:"Lo\u1ea1i s\xe1ch \u2728"})}),(0,w.jsx)("div",{className:"py-2 space-y-1",children:(0,w.jsx)("div",{className:"hidden md:flex",children:(0,w.jsxs)("form",{onSubmit:B(q),className:"flex space-x-3",children:[(0,w.jsx)("input",(0,s.Z)((0,s.Z)({},A("TenTheLoai",{required:!0})),{},{placeholder:"T\xean th\u1ec3 lo\u1ea1i...",type:"text",className:(0,l.Z)(E.TenTheLoai&&"border-red-600","focus:outline-none rounded-sm border")})),(0,w.jsx)("button",{className:"px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto",children:"Th\xeam"})]})})}),(0,w.jsxs)("table",{className:"border-collapse border rounded-sm w-full bg-white",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{className:"border bg-slate-800 text-slate-200",children:[(0,w.jsx)("th",{className:"p-2 text-left",children:"T\xean th\u1ec3 lo\u1ea1i"}),(0,w.jsx)("th",{className:"p-2 text-center w-16"}),(0,w.jsx)("th",{className:"p-2 text-center w-16"})]})}),(0,w.jsx)("tbody",{children:O&&(null===O||void 0===O?void 0:O.map((function(t,n){return(0,w.jsxs)("tr",{className:"odd:bg-slate-100 border",children:[(0,w.jsx)("td",{className:"p-2",children:t.TenTheLoai}),(0,w.jsx)("td",{className:"p-2 text-indigo-500 font-semibold w-16 align-middle",children:(0,w.jsx)("span",{className:"w-full",children:(0,w.jsx)(d.HlX,{onClick:function(){return X(t)},size:20,className:"cursor-pointer mx-auto"})})}),(0,w.jsx)("td",{className:"p-2 text-red-500 font-semibold w-16 align-middle",children:(0,w.jsx)("span",{className:"w-full",children:(0,w.jsx)(u.YK6,{onClick:function(){return U(t.IDTheLoai)},size:20,className:"cursor-pointer mx-auto"})})})]},e+n)})))})]}),(0,w.jsx)("div",{className:(0,l.Z)(Z?"z-30":"-z-30","fixed flex justify-center items-center inset-0 bg-slate-900 bg-opacity-20"),children:(0,w.jsx)("div",{className:(0,l.Z)(!Z&&"scale-0",b,"flex w-full flex-col bg-white rounded-sm overflow-y-scroll sm:w-1/2 max-h-screen transition-all duration-200"),children:(0,w.jsxs)("form",{onSubmit:K(H),className:"w-full flex flex-col py-4 px-4 sm:p-6",children:[(0,w.jsx)("span",{className:"w-full flex text-slate-600 lg:text-lg",children:"Th\xf4ng tin th\u1ec3 lo\u1ea1i"}),(0,w.jsx)("div",{className:"flex flex-col w-full justify-center h-full sm:px-10",children:(0,w.jsxs)("div",{className:"flex w-full py-2",children:[(0,w.jsx)("div",{className:"w-1/3 lg:w-4/12 items-center flex",children:(0,w.jsx)("span",{className:"flex text-sm lg:text-base font-semibold text-slate-800",children:"T\xean Th\u1ec3 lo\u1ea1i"})}),(0,w.jsx)("div",{className:"w-2/3 lg:w-8/12 flex",children:(0,w.jsx)("input",(0,s.Z)((0,s.Z)({},I("TheLoai")),{},{className:"w-full border rounded-sm px-2 py-1 lg:py-2 focus:outline-none focus:ring-sky-200 focus:ring-1 placeholder:text-slate-400 placeholder:text-sm lg:placeholder:text-base",type:"text",placeholder:"T\xean th\u1ec3 lo\u1ea1i"}))})]})}),(0,w.jsx)("div",{className:"w-full flex pt-8",children:(0,w.jsxs)("div",{className:"ml-auto space-x-3",children:[(0,w.jsx)("button",{type:"button",onClick:function(){return k(!1)},className:"py-2 px-3 text-slate-700 hover:bg-slate-100 shadow-sm border transition rounded-sm",children:"Tr\u1edf l\u1ea1i"}),(0,w.jsx)("button",{type:"submit",className:"py-2 px-3 bg-slate-700 hover:bg-slate-500 shadow-sm border transition rounded-sm text-white",children:"C\u1eadp nh\u1eadt"})]})})]})})})]})}}}]);
//# sourceMappingURL=1183.c901b370.chunk.js.map