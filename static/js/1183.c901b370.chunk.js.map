{"version":3,"file":"static/js/1183.c901b370.chunk.js","mappings":"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","sources":["webpack://frontend/./src/page/Admin/TypeOf/style.module.scss?525a","page/Admin/TypeOf/index.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"none-spin\":\"style_none-spin__RRpE6\",\"hide-scrollbar\":\"style_hide-scrollbar__Oeq6v\"};","import clsx from \"clsx\";\r\nimport { useId } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { AiFillDelete } from \"react-icons/ai\";\r\nimport { BsPencilSquare } from \"react-icons/bs\";\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Loading from \"../../../components/Loading\";\r\nimport axiosJWT from \"../../../config/axiosJWT\";\r\nimport { API } from \"../../../constants/api\";\r\nimport style from './style.module.scss';\r\n\r\n\r\nfunction TypeOf() {\r\n    const uid = useId();\r\n    const { id } = useParams();\r\n    const queryClient = useQueryClient();\r\n    const [typeOfBook, setTypeOfBook] = useState({});\r\n    const [formUpdate, setFormUpdate] = useState(false);\r\n    const { data: typeOfBooks, isLoading, isError } = useQuery(['typeofbooks'], async () => {\r\n        if (!isNaN(id)) {\r\n            try {\r\n                const result = await axiosJWT.get(`${API.GET_TYPEOF_BOOK_IN_PAGE}/${id}`);\r\n                console.log(result.data);\r\n                return result.data;\r\n            } catch (error) {\r\n                return []\r\n            }\r\n        }\r\n        return []\r\n    }, { keepPreviousData: true, staleTime: 5000 });\r\n\r\n    const { register, formState: { errors }, handleSubmit, reset } = useForm({\r\n        mode: \"onBlur\",\r\n        defaultValues: {\r\n            TenTheLoai: \"\"\r\n        }\r\n    });\r\n    const { register: registerUpdate, formState: { errors: errorsUpdate }, handleSubmit: handleSubmitUpdate, reset: resetUpdate, setValue } = useForm({\r\n        mode: \"onBlur\",\r\n        defaultValues: {\r\n            TheLoai: \"\"\r\n        }\r\n    });\r\n\r\n    const { mutateAsync: addTypeOfBook } = useMutation(async (data) => {\r\n        const result = await axiosJWT.post(API.MANAGE_TYPEOF_BOOK, { TenTheLoai: data.TenTheLoai, IDDanhMuc: id })\r\n        return result.data;\r\n    }, {\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries(\"typeofbooks\")\r\n        }\r\n    })\r\n    const { mutateAsync: updateTypeOfBook } = useMutation(async (data) => {\r\n        const result = await axiosJWT.put(`${API.MANAGE_TYPEOF_BOOK}/${typeOfBook.IDTheLoai}`, { TenTheLoai: data.TheLoai, IDDanhMuc: id });\r\n        return result.data;\r\n    }, {\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries(\"typeofbooks\")\r\n        }\r\n    })\r\n    const { mutateAsync: deleteTypeOfBook } = useMutation(async (idProduct) => {\r\n        const result = await axiosJWT.delete(`${API.MANAGE_TYPEOF_BOOK}/${idProduct}`)\r\n        return result.data;\r\n    }, {\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries(\"typeofbooks\")\r\n        }\r\n    })\r\n\r\n    const showUpdateTypeOfBook = useCallback(data => {\r\n        setValue(\"TheLoai\", data.TenTheLoai)\r\n        setTypeOfBook(data);\r\n        setFormUpdate(true);\r\n    }, [])\r\n\r\n    const handleAddTypeOfBook = useCallback(data => {\r\n        if (window.confirm(\"Báº¡n cháº¯c cháº¯n lÃ  muá»‘n thÃªm danh má»¥c nÃ y chá»©\"))\r\n            addTypeOfBook(data)\r\n                .then(() => {\r\n                    window.alert(\"ThÃªm danh má»¥c thÃ nh cÃ´ng\");\r\n                    reset({ TenDanhMuc: \"\" })\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    window.alert(\"ThÃªm danh má»¥c tháº¥t báº¡i\");\r\n                })\r\n    }, [])\r\n\r\n    const handleUpdateTypeOfBook = useCallback(data => {\r\n        if (window.confirm(\"Báº¡n cháº¯c cháº¯n lÃ  muá»‘n thay Ä‘á»•i danh má»¥c nÃ y chá»©\"))\r\n            updateTypeOfBook(data)\r\n                .then(() => {\r\n                    window.alert(\"Thay Ä‘á»•i danh má»¥c thÃ nh cÃ´ng\");\r\n                    setFormUpdate(false);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    window.alert(\"Thay Ä‘á»•i danh má»¥c tháº¥t báº¡i\");\r\n                })\r\n    }, [])\r\n    const handleDeleteTypeOfBook = useCallback(idTypeOfBook => {\r\n        if (window.confirm(\"Báº¡n cháº¯c cháº¯n lÃ  muá»‘n xÃ³a danh má»¥c nÃ y chá»©\"))\r\n            deleteTypeOfBook(idTypeOfBook)\r\n                .then(() => {\r\n                    window.alert(\"XÃ³a danh má»¥c thÃ nh cÃ´ng\");\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    window.alert(\"XÃ³a danh má»¥c tháº¥t báº¡i\");\r\n                })\r\n    }, [])\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Loading />\r\n        )\r\n    }\r\n    if (isError) {\r\n        return (\r\n            <h1>KhÃ´ng thá»ƒ táº£i Ä‘Æ°á»£c dá»¯ liá»‡u ðŸ˜¥</h1>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex space-x-2\">\r\n                <h2 className=\"text-xl font-semibold\">Loáº¡i sÃ¡ch âœ¨</h2>\r\n            </div>\r\n\r\n            <div className=\"py-2 space-y-1\">\r\n                <div className=\"hidden md:flex\">\r\n                    <form onSubmit={handleSubmit(handleAddTypeOfBook)} className=\"flex space-x-3\">\r\n                        <input {...register(\"TenTheLoai\", { required: true })} placeholder=\"TÃªn thá»ƒ loáº¡i...\" type=\"text\" className={clsx(errors[\"TenTheLoai\"] && \"border-red-600\", \"focus:outline-none rounded-sm border\")} />\r\n                        <button className=\"px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto\">ThÃªm</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <table className=\"border-collapse border rounded-sm w-full bg-white\">\r\n                <thead>\r\n                    <tr className=\"border bg-slate-800 text-slate-200\">\r\n                        <th className=\"p-2 text-left\">TÃªn thá»ƒ loáº¡i</th>\r\n                        <th className=\"p-2 text-center w-16\"></th>\r\n                        <th className=\"p-2 text-center w-16\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {typeOfBooks && typeOfBooks?.map((item, index) => (\r\n                        <tr key={uid + index} className=\"odd:bg-slate-100 border\">\r\n                            <td className=\"p-2\">{item.TenTheLoai}</td>\r\n                            <td className=\"p-2 text-indigo-500 font-semibold w-16 align-middle\"><span className=\"w-full\"><BsPencilSquare onClick={() => showUpdateTypeOfBook(item)} size={20} className='cursor-pointer mx-auto' /></span></td>\r\n                            <td className=\"p-2 text-red-500 font-semibold w-16 align-middle\"><span className=\"w-full\"><AiFillDelete onClick={() => handleDeleteTypeOfBook(item.IDTheLoai)} size={20} className='cursor-pointer mx-auto' /></span></td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            <div className={clsx(formUpdate ? \"z-30\" : \"-z-30\", \"fixed flex justify-center items-center inset-0 bg-slate-900 bg-opacity-20\")}>\r\n                <div className={clsx(!formUpdate && \"scale-0\", style[\"hide-scrollbar\"], \"flex w-full flex-col bg-white rounded-sm overflow-y-scroll sm:w-1/2 max-h-screen transition-all duration-200\")}>\r\n                    <form onSubmit={handleSubmitUpdate(handleUpdateTypeOfBook)} className=\"w-full flex flex-col py-4 px-4 sm:p-6\">\r\n                        <span className=\"w-full flex text-slate-600 lg:text-lg\">ThÃ´ng tin thá»ƒ loáº¡i</span>\r\n                        <div className=\"flex flex-col w-full justify-center h-full sm:px-10\">\r\n                            <div className=\"flex w-full py-2\">\r\n                                <div className=\"w-1/3 lg:w-4/12 items-center flex\">\r\n                                    <span className=\"flex text-sm lg:text-base font-semibold text-slate-800\">TÃªn Thá»ƒ loáº¡i</span>\r\n                                </div>\r\n\r\n                                <div className=\"w-2/3 lg:w-8/12 flex\">\r\n                                    <input {...registerUpdate(\"TheLoai\")} className=\"w-full border rounded-sm px-2 py-1 lg:py-2 focus:outline-none focus:ring-sky-200 focus:ring-1 placeholder:text-slate-400 placeholder:text-sm lg:placeholder:text-base\" type=\"text\" placeholder=\"TÃªn thá»ƒ loáº¡i\" />\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"w-full flex pt-8\">\r\n                            <div className=\"ml-auto space-x-3\">\r\n                                <button type=\"button\" onClick={() => setFormUpdate(false)} className=\"py-2 px-3 text-slate-700 hover:bg-slate-100 shadow-sm border transition rounded-sm\">Trá»Ÿ láº¡i</button>\r\n                                <button type=\"submit\" className=\"py-2 px-3 bg-slate-700 hover:bg-slate-500 shadow-sm border transition rounded-sm text-white\">Cáº­p nháº­t</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default TypeOf;\r\n"],"names":["uid","useId","id","useParams","queryClient","useQueryClient","useState","typeOfBook","setTypeOfBook","formUpdate","setFormUpdate","useQuery","isNaN","axiosJWT","API","result","console","log","data","keepPreviousData","staleTime","typeOfBooks","isLoading","isError","useForm","mode","defaultValues","TenTheLoai","register","errors","formState","handleSubmit","reset","TheLoai","registerUpdate","handleSubmitUpdate","setValue","useMutation","IDDanhMuc","onSuccess","invalidateQueries","addTypeOfBook","mutateAsync","IDTheLoai","updateTypeOfBook","idProduct","deleteTypeOfBook","showUpdateTypeOfBook","useCallback","handleAddTypeOfBook","window","confirm","then","alert","TenDanhMuc","catch","err","handleUpdateTypeOfBook","handleDeleteTypeOfBook","idTypeOfBook","Loading","className","onSubmit","required","placeholder","type","clsx","map","item","index","onClick","size","style"],"sourceRoot":""}