"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[2441],{3346:function(n,e,a){a.r(e),a.d(e,{default:function(){return N}});var s=a(1413),r=a(7762),t=a(4925),c=a(4165),o=a(5861),i=a(885),l=a(1134),u=a(6509),d=a(9871),h=a(8664),p=a(8182),m=a(2791),x="style_hide-scrollbar__8BnN8",f=a(6233),g=a(2555),j=a(1933),v=a(5089),T=a(5548),Z=a(7786),b=a(1298),D=a(184),y=["IDDanhMuc"];var N=function(){var n,e=(0,m.useState)(!1),a=(0,i.Z)(e,2),N=a[0],w=a[1],I=(0,j.useQueries)([{queryKey:["category"],queryFn:function(){var n=(0,o.Z)((0,c.Z)().mark((function n(){var e;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.get(T.b.GET_LIST_ALL_CATEGORY);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3},{queryKey:["publishing company"],queryFn:function(){var n=(0,o.Z)((0,c.Z)().mark((function n(){var e;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.get(T.b.GET_LIST_ALL_PUBLISHING);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3},{queryKey:["authors"],queryFn:function(){var n=(0,o.Z)((0,c.Z)().mark((function n(){var e;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Z.get(T.b.AUTHOR);case 2:return e=n.sent,n.abrupt("return",e.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3}]),k=(0,l.cI)({mode:"onBlur",defaultValues:{TenSanPham:"",TomTatND:"",IDDanhMuc:"",IDTheLoai:"",IDNhaXuatBan:"",GiaBan:"",IDTacGia:"",GiamGia:"0",SoTrang:"",SoLuongConLai:"",DonViTinh:"Quy\u1ec3n",HinhAnh:""}}),L=k.register,S=k.control,G=k.formState.errors,_=k.handleSubmit,C=k.setValue,A=k.trigger,P=k.watch,B=k.reset,E=(0,j.useQuery)({queryKey:["type of product",P("IDDanhMuc")],queryFn:function(){var n=(0,o.Z)((0,c.Z)().mark((function n(){var e;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!P("IDDanhMuc")){n.next=5;break}return n.next=3,v.Z.get("".concat(T.b.GET_LIST_ALL_TYPEOF_BOOK,"/").concat(P("IDDanhMuc")));case 3:return e=n.sent,n.abrupt("return",e.data);case 5:return n.abrupt("return",[]);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),keepPreviousData:!0,staleTime:5e3}),M=E.data,q=E.isLoading,H=E.isError,V=(0,m.useState)(),F=(0,i.Z)(V,2),O=F[0],R=F[1],K=(0,m.useCallback)(function(){var n=(0,o.Z)((0,c.Z)().mark((function n(e){var a,s;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=e.target.files[0])){n.next=12;break}return C("HinhAnh",a),n.next=5,A("HinhAnh");case 5:if(!n.sent){n.next=11;break}(s=new FileReader).readAsDataURL(a),s.onloadend=function(){R(s.result)},n.next=12;break;case 11:R(null);case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[]),X=(0,m.useCallback)(function(){var n=(0,o.Z)((0,c.Z)().mark((function n(e){var a;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.IDDanhMuc,a=(0,t.Z)(e,y),n.prev=1,w(!0),n.next=5,v.Z.post(T.b.CREATE_PRODUCT,a,{headers:{"Content-Type":"multipart/form-data"}});case 5:n.sent.error||(B({TenSanPham:"",TomTatND:"",IDDanhMuc:"",IDTheLoai:"",IDNhaXuatBan:"",GiaBan:"",IDTacGia:"",GiamGia:"0",SoTrang:"",SoLuongConLai:"",DonViTinh:"Quy\u1ec3n",HinhAnh:""}),R(""),window.alert("Th\xeam s\u1ea3n ph\u1ea9m th\xe0nh c\xf4ng")),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),window.alert("Th\xeam s\u1ea3n ph\u1ea9m th\u1ea5t b\u1ea1i");case 12:return n.prev=12,w(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[1,9,12,15]])})));return function(e){return n.apply(this,arguments)}}(),[]),Q=(0,r.Z)(I);try{for(Q.s();!(n=Q.n()).done;){var U=n.value;if(U.isLoading)return(0,D.jsx)(Z.Z,{});if(U.isError)return(0,D.jsx)("div",{children:"\u0110\xe3 c\xf3 l\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u \ud83d\ude25"})}}catch(Y){Q.e(Y)}finally{Q.f()}return q?(0,D.jsx)(Z.Z,{}):H?(0,D.jsx)("div",{children:"\u0110\xe3 c\xf3 l\u1ed7i khi l\u1ea5y d\u1eef li\u1ec7u \ud83d\ude25"}):(0,D.jsxs)("form",{onSubmit:_(X),children:[(0,D.jsxs)("div",{className:"flex",children:[(0,D.jsx)("h2",{className:"text-xl font-semibold",children:"Th\xeam S\u1ea3n ph\u1ea9m"}),N?(0,D.jsxs)("button",{className:"w-28 px-3 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto",disabled:!0,children:[(0,D.jsx)(b.Z,{})," Loading..."]}):(0,D.jsx)("button",{className:"w-28 px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto",children:"X\xe1c nh\u1eadn"})]}),(0,D.jsxs)("div",{className:"grid sm:grid-cols-5 grid-cols-1 grid-flow-dense py-2 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3",children:[(0,D.jsx)("span",{children:"T\xean s\u1ea3n ph\u1ea9m"}),(0,D.jsx)(u.Z,{rounded:"rounded-sm",name:"TenSanPham",control:S,rules:h.s.name,placeholder:"Truy\u1ec7n c\u01b0\u1eddi Vi\u1ec7t Nam..."})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3 row-span-2",children:[(0,D.jsx)("span",{children:"N\u1ed9i dung"}),(0,D.jsx)("textarea",(0,s.Z)((0,s.Z)({},L("TomTatND",h.s.content)),{},{className:(0,p.Z)(G.TomTatND&&"border-red-600",x,"outline-none p-4 w-full border resize-none overflow-scroll"),rows:"6",placeholder:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m..."})),G.TomTatND&&(0,D.jsxs)("span",{className:"px-2 italic text-sm text-red-500",children:[G.TomTatND.message,"*"]})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3",children:[(0,D.jsx)("span",{children:"T\xe1c gi\u1ea3"}),(0,D.jsx)(g.Z,{name:"IDTacGia",control:S,rules:h.s.author,data:I[2].data})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Danh m\u1ee5c"}),(0,D.jsx)(g.Z,{name:"IDDanhMuc",control:S,rules:h.s.category,data:I[0].data})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Th\u1ec3 lo\u1ea1i"}),(0,D.jsx)(g.Z,{name:"IDTheLoai",control:S,rules:h.s.typeof,data:M})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Nh\xe0 xu\u1ea5t b\u1ea3n"}),(0,D.jsx)(g.Z,{name:"IDNhaXuatBan",control:S,rules:h.s.publishing,data:I[1].data})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"\u0110\u01a1n v\u1ecb t\xednh"}),(0,D.jsx)(u.Z,{rounded:"rounded-sm",name:"DonViTinh",control:S,rules:h.s.unit,placeholder:"VD: Cu\u1ed1n"})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3 grid grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"Gi\xe1 b\xe1n"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"GiaBan",control:S,rules:h.s.price,placeholder:"120000"})]}),(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"Ph\u1ea7n tr\u0103m gi\u1ea3m gi\xe1"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"GiamGia",control:S,rules:h.s.discount,placeholder:"10"})]})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2 grid grid-cols-2 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"SoLuongConLai",control:S,rules:h.s.count,placeholder:"120"})]}),(0,D.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,D.jsx)("span",{children:"S\u1ed1 Trang"}),(0,D.jsx)(u.Z,{type:"number",rounded:"rounded-sm",name:"SoTrang",control:S,rules:h.s.numberPage,placeholder:"10"})]})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-3 ",children:[(0,D.jsx)("span",{children:"H\xecnh \u1ea3nh"}),(0,D.jsx)(d.Z,{name:"HinhAnh",control:S,rules:h.s.image,onChangeImage:K})]}),(0,D.jsxs)("div",{className:"col-span-1 sm:col-span-2",children:[(0,D.jsx)("span",{children:"Xem Tr\u01b0\u1edbc"}),(0,D.jsx)(f.Z,{fileImage:O})]})]})]})}}}]);
//# sourceMappingURL=2441.7314afec.chunk.js.map