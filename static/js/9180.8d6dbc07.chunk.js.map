{"version":3,"file":"static/js/9180.8d6dbc07.chunk.js","mappings":"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","sources":["webpack://frontend/./src/page/Admin/Category/style.module.scss?88f2","page/Admin/Category/index.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"none-spin\":\"style_none-spin__-XtwJ\",\"hide-scrollbar\":\"style_hide-scrollbar__-xR6A\"};","import clsx from \"clsx\";\r\nimport { useId } from \"react\";\r\nimport { useCallback } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { AiFillDelete } from \"react-icons/ai\";\r\nimport { BsPencilSquare } from \"react-icons/bs\";\r\nimport { TbListDetails } from \"react-icons/tb\";\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Loading from \"../../../components/Loading\";\r\nimport axiosJWT from \"../../../config/axiosJWT\";\r\nimport { API } from \"../../../constants/api\";\r\nimport { PATH } from \"../../../constants/path\";\r\nimport style from './style.module.scss';\r\n\r\n\r\nfunction Category() {\r\n    const id = useId();\r\n    const queryClient = useQueryClient();\r\n    const [category, setCategory] = useState({});\r\n    const [formUpdate, setFormUpdate] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const navigate = useNavigate();\r\n    const { register, formState: { errors }, handleSubmit, reset } = useForm({\r\n        mode: \"onBlur\",\r\n        defaultValues: {\r\n            TenDanhMuc: \"\"\r\n        }\r\n    });\r\n    const { register: registerUpdate, formState: { errors: errorsUpdate }, handleSubmit: handleSubmitUpdate, reset: resetUpdate, setValue } = useForm({\r\n        mode: \"onBlur\",\r\n        defaultValues: {\r\n            DanhMuc: \"\"\r\n        }\r\n    });\r\n    const { data: categories, isLoading, isError } = useQuery(['categories', page], async () => {\r\n        const result = await axiosJWT.get(API.GET_LIST_CATEGORY_IN_PAGE, {\r\n            params: {\r\n                p: page,\r\n                s: 10\r\n            }\r\n        });\r\n        return result.data;\r\n    }, { keepPreviousData: true });\r\n    const { mutateAsync: addCategory } = useMutation(async (data) => {\r\n        const result = await axiosJWT.post(API.MANAGE_CATEGORY, data)\r\n        return result.data;\r\n    }, {\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries(\"categories\")\r\n        }\r\n    })\r\n    const { mutateAsync: updateCategory } = useMutation(async (data) => {\r\n        const result = await axiosJWT.put(`${API.MANAGE_CATEGORY}/${category.IDDanhMuc}`, { TenDanhMuc: data.DanhMuc });\r\n        return result.data;\r\n    }, {\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries(\"categories\")\r\n        }\r\n    })\r\n    const { mutateAsync: deleteCategory } = useMutation(async (idProduct) => {\r\n        const result = await axiosJWT.delete(`${API.MANAGE_CATEGORY}/${idProduct}`)\r\n        return result.data;\r\n    }, {\r\n        onSuccess: () => {\r\n            queryClient.invalidateQueries(\"categories\")\r\n        }\r\n    })\r\n    const nextPage = useCallback(() => {\r\n        setPage(currentPage => currentPage >= categories.SoLuongTrang ? categories.SoLuongTrang : ++currentPage);\r\n    }, [page, categories]);\r\n\r\n    const prevPage = useCallback(() => {\r\n        setPage(currentPage => currentPage > 1 ? --currentPage : 1);\r\n    }, [page]);\r\n\r\n    const firstPage = useCallback(() => {\r\n        setPage(1);\r\n    }, []);\r\n    const lastPage = useCallback(() => {\r\n        setPage(categories.SoLuongTrang);\r\n    }, [categories]);\r\n    const changePage = useCallback((e) => {\r\n        const value = parseInt(e.target.value);\r\n        if (value > 0 && value <= categories.SoLuongTrang)\r\n            setPage(value);\r\n    }, [categories])\r\n\r\n    const showUpdateCategory = useCallback(data => {\r\n        setValue(\"DanhMuc\", data.TenDanhMuc)\r\n        setCategory(data);\r\n        setFormUpdate(true);\r\n    }, [])\r\n\r\n    const transferTypeOfBooks = useCallback(idCategory => {\r\n        navigate(`${PATH.admin.typeof_transfer_page}/${idCategory}`)\r\n    }, [])\r\n\r\n    const handleAddCategory = useCallback(data => {\r\n        if (window.confirm(\"Bạn chắc chắn là muốn thêm danh mục này chứ\"))\r\n            addCategory(data)\r\n                .then(() => {\r\n                    window.alert(\"Thêm danh mục thành công\");\r\n                    reset({ TenDanhMuc: \"\" })\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    window.alert(\"Thêm danh mục thất bại\");\r\n                })\r\n    }, [])\r\n\r\n    const handleUpdateCategory = useCallback(data => {\r\n        if (window.confirm(\"Bạn chắc chắn là muốn thay đổi danh mục này chứ\"))\r\n            updateCategory(data)\r\n                .then(() => {\r\n                    window.alert(\"Thay đổi danh mục thành công\");\r\n                    setFormUpdate(false);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    window.alert(\"Thay đổi danh mục thất bại\");\r\n                })\r\n    }, [])\r\n    const handleDeleteCategory = useCallback(idCategory => {\r\n        if (window.confirm(\"Bạn chắc chắn là muốn xóa danh mục này chứ\"))\r\n            deleteCategory(idCategory)\r\n                .then(() => {\r\n                    window.alert(\"Xóa danh mục thành công\");\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    window.alert(\"Xóa danh mục thất bại\");\r\n                })\r\n    }, [])\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <Loading />\r\n        )\r\n    }\r\n    if (isError) {\r\n        return (\r\n            <h1>Không thể tải được dữ liệu 😥</h1>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex space-x-2\">\r\n                <h2 className=\"text-xl font-semibold\">Danh mục ✨</h2>\r\n            </div>\r\n\r\n            <div className=\"py-2 space-y-1\">\r\n                <div className=\"hidden md:flex\">\r\n                    <form onSubmit={handleSubmit(handleAddCategory)} className=\"flex space-x-3\">\r\n                        <input {...register(\"TenDanhMuc\", { required: true })} placeholder=\"Tên danh mục...\" type=\"text\" className={clsx(errors[\"TenDanhMuc\"] && \"border-red-600\", \"focus:outline-none rounded-sm border\")} />\r\n                        <button className=\"px-3 py-1 bg-orange-600 rounded-sm text-white text-sm hover:bg-orange-500 transition-colors ml-auto\">Thêm</button>\r\n                    </form>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-2 py-1\">\r\n                    <div className='px-2 border rounded-sm cursor-pointer'>{categories.TongDanhMuc} mục</div>\r\n                    <div className='px-2 border rounded-sm cursor-pointer' onClick={firstPage}>&#171;</div>\r\n                    <div className='px-2 border rounded-sm cursor-pointer' onClick={prevPage}>&#60;</div>\r\n                    <div><input type=\"number\" className={clsx(style[\"none-spin\"], 'px-2 border rounded-sm cursor-pointer w-14 text-center')} value={page} onChange={(e) => changePage(e)} /> &#47; {categories?.SoLuongTrang}</div>\r\n                    <div className='px-2 border rounded-sm cursor-pointer' onClick={nextPage}>&#62;</div>\r\n                    <div className='px-2 border rounded-sm cursor-pointer' onClick={lastPage}>&#187;</div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <table className=\"border-collapse border rounded-sm w-full bg-white\">\r\n                <thead>\r\n                    <tr className=\"border bg-slate-800 text-slate-200\">\r\n                        <th className=\"p-2 text-left\">Danh mục</th>\r\n                        <th className=\"p-2 text-center w-16\"></th>\r\n                        <th className=\"p-2 text-center w-16\"></th>\r\n                        <th className=\"p-2 text-center w-16\"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {categories && categories?.DanhSach.map((item, index) => (\r\n                        <tr key={id + item.IDDanhMuc} className=\"odd:bg-slate-100 border\">\r\n                            <td className=\"p-2\">{item.TenDanhMuc}</td>\r\n                            <td className=\"p-2 text-indigo-500 font-semibold w-16 align-middle\"><span className=\"w-full\"><TbListDetails onClick={() => transferTypeOfBooks(item.IDDanhMuc)} size={20} className='cursor-pointer mx-auto' /></span></td>\r\n                            <td className=\"p-2 text-indigo-500 font-semibold w-16 align-middle\"><span className=\"w-full\"><BsPencilSquare onClick={() => showUpdateCategory(item)} size={20} className='cursor-pointer mx-auto' /></span></td>\r\n                            <td className=\"p-2 text-red-500 font-semibold w-16 align-middle\"><span className=\"w-full\"><AiFillDelete onClick={() => handleDeleteCategory(item.IDDanhMuc)} size={20} className='cursor-pointer mx-auto' /></span></td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n            <div className={clsx(formUpdate ? \"z-30\" : \"-z-30\", \"fixed flex justify-center items-center inset-0 bg-slate-900 bg-opacity-20\")}>\r\n                <div className={clsx(!formUpdate && \"scale-0\", style[\"hide-scrollbar\"], \"flex w-full flex-col bg-white rounded-sm overflow-y-scroll sm:w-1/2 max-h-screen transition-all duration-200\")}>\r\n                    <form onSubmit={handleSubmitUpdate(handleUpdateCategory)} className=\"w-full flex flex-col py-4 px-4 sm:p-6\">\r\n                        <span className=\"w-full flex text-slate-600 lg:text-lg\">Thông tin danh mục</span>\r\n                        <div className=\"flex flex-col w-full justify-center h-full sm:px-10\">\r\n                            <div className=\"flex w-full py-2\">\r\n                                <div className=\"w-1/3 lg:w-4/12 items-center flex\">\r\n                                    <span className=\"flex text-sm lg:text-base font-semibold text-slate-800\">Tên Danh Mục</span>\r\n                                </div>\r\n\r\n                                <div className=\"w-2/3 lg:w-8/12 flex\">\r\n                                    <input {...registerUpdate(\"DanhMuc\")} className=\"w-full border rounded-sm px-2 py-1 lg:py-2 focus:outline-none focus:ring-sky-200 focus:ring-1 placeholder:text-slate-400 placeholder:text-sm lg:placeholder:text-base\" type=\"text\" placeholder=\"Tên danh mục\" />\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"w-full flex pt-8\">\r\n                            <div className=\"ml-auto space-x-3\">\r\n                                <button type=\"button\" onClick={() => setFormUpdate(false)} className=\"py-2 px-3 text-slate-700 hover:bg-slate-100 shadow-sm border transition rounded-sm\">Trở lại</button>\r\n                                <button type=\"submit\" className=\"py-2 px-3 bg-slate-700 hover:bg-slate-500 shadow-sm border transition rounded-sm text-white\">Cập nhật</button>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Category;\r\n"],"names":["id","useId","queryClient","useQueryClient","useState","category","setCategory","formUpdate","setFormUpdate","page","setPage","navigate","useNavigate","useForm","mode","defaultValues","TenDanhMuc","register","errors","formState","handleSubmit","reset","DanhMuc","registerUpdate","handleSubmitUpdate","setValue","useQuery","axiosJWT","API","params","p","s","result","data","keepPreviousData","categories","isLoading","isError","useMutation","onSuccess","invalidateQueries","addCategory","mutateAsync","IDDanhMuc","updateCategory","idProduct","deleteCategory","nextPage","useCallback","currentPage","SoLuongTrang","prevPage","firstPage","lastPage","changePage","e","value","parseInt","target","showUpdateCategory","transferTypeOfBooks","idCategory","PATH","handleAddCategory","window","confirm","then","alert","catch","err","console","log","handleUpdateCategory","handleDeleteCategory","Loading","className","onSubmit","required","placeholder","type","clsx","TongDanhMuc","onClick","style","onChange","DanhSach","map","item","index","size"],"sourceRoot":""}